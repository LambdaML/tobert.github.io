<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    
    <meta name="keywords" content="itanic, ksh, pdksh, security, hp-ux, itanium, auditing, ">
    <meta property="article:published_time" content="2005-09-20"/>
    <meta property="article:modified_time" content="2005-09-20"/>

     <!-- twitter cards -->
     <meta name="twitter:card" content="summary">
     <meta name="twitter:site" content="@AlTobey">
     <meta name="twitter:title" content="Building pdksh on HP-UX/Itanium : @AlTobey Writes">
     <meta name="twitter:creator" content="@AlTobey">
     
     <meta name="twitter:domain" content="http://tobert.github.io">

    <title>Building pdksh on HP-UX/Itanium</title>
    <link rel="canonical" href="http://tobert.github.io/post/2005-09-20-pdksh-5.html">
    <link href="http://tobert.github.io/rss.xml" rel="alternate" type="application/rss+xml" title="@AlTobey Writes" />
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/css/tobert.css">
  </head>
<body>

<a href="#content" class="sr-only">Skip to main content</a>

<div class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">@AlTobey Writes</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/about">About</a></li>
        <li><a href="/contact">Contact</a></li>
        <li><a href="https://github.com/tobert/tobert.github.io/edit/master/post/2005-09-20-pdksh-5.html">Edit</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>
<!-- end of header.html -->
<div class="container">

<div class="css-full-post-content js-full-post-content">
pdksh 5.2.14 on HP-UX 11.23 Itanium: If you grab the source for pdksh and try to compile it on Itanium HP-UX, it will tend to dump core with SIGBUS. SIGBUS is a signal sent to processes when they access unaligned memory, usually in C unions or structs. pdksh has a union in it that ends up unaligned on Itanium, which is very particular about such things. HP-UX is also fussy.<br /><br />Go into the source tree and open up "alloc.c" in your favorite editor. Search for "union Cell", which is the union declaration that is causing the trouble. Change the last member "double djunk; /* alignement */" to "long double djunk; /* alignemnt */." On Itanic, long double is 128 bits and double is 64 bits. Pushing the union out to 128 bits makes it align right all the time, even though it does eat up a bit more memory now.<br /><br />I also have a patch at work that logs all commands run by root to syslog with the username of the owner of the terminal device.   It's a fancy way to avoid typing "sudo" in front of everything while still logging every command for auditing purposes.    Unfortunately, I probably can't post that patch.
</div>
</div>
<!-- begin footer.html -->
<footer class="footer">
  <div id="footer" class="container">
    <a class="pull-right" style="padding-right: 1em;" href="/attributes">License &amp; Credits</a>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46953804-1', 'tobert.github.io');
  ga('send', 'pageview');

</script>

</body>
</html>
